/*! seq-ari 20-09-2016 */
angular.module("seqariApp",["ngRoute","ui.bootstrap","ngTable","chart.js","ngSanitize","ngCsv"]),angular.module("seqariApp").config(["$routeProvider",function(a){a=a.when("/",{templateUrl:"app/home/home.html",controller:"homeCtrl"}),a=a.when("/login",{templateUrl:"app/login/login.html",controller:"loginCtrl",title:"Login"}),a=a.when("/restart/:perishableToken",{templateUrl:"app/login/restartPassword.html",controller:"restartPasswordCtrl",title:"Restart"}),a=a.when("/validateOrder/:qrCode",{templateUrl:"app/validate/validateOrder.html",controller:"validateOrderCtrl",title:"Validate"}),a=a.when("/500",{templateUrl:"500.html",title:"500"}),a=a.otherwise({templateUrl:"404.html",title:"404"})}]),angular.module("seqariApp").run(["$rootScope","commonServices","$location","$routeParams","$route",function(a,b,c,d,e){a.$broadcast("showLoadingModal"),a.isLogged=!1,a.seqariVersion="CSC-6.2",a.carrau={lat:-34.873584,"long":-56.151004,business:"CARRAU & CÍA. S.A.",address:"Avda. Dámaso Antonio Larrañaga 3444"};var f=b.getAction("user_logged");f.then(function(b){if(b.logged)a.isLogged=!0,a.loggedUser=b.data,console.log("Usuario logueado!");else{var d=c.path().split("/");"restart"!==d[1]&&"validateOrder"!==d[1]&&c.url("/login")}a.$broadcast("hideLoadingModal")},function(b){c.url("/500"),a.$broadcast("hideLoadingModal")});var g=c.path;c.path=function(b,d){if(d===!1)var f=e.current,h=a.$on("$locationChangeSuccess",function(){e.current=f,h()});return g.apply(c,[b])},a.milisecToDaysHoursMinSec=function(a){var b=6e4,c=60*b,d=24*c;days=Math.floor(a/d),a-=days*d,hours=Math.floor(a/c),a-=hours*c,minutes=Math.floor(a/b),a-=minutes*b,seconds=Math.floor(a/1e3);var e={d:days,h:hours,m:minutes,s:seconds};return e}}]),angular.module("seqariApp").controller("clientCtrl",["$scope","$rootScope","commonServices","$modal",function(a,b,c,d){b.$broadcast("showLoadingModal");var e=c.getAction("clients");e.then(function(c){a.allClients=c.data,b.$broadcast("hideLoadingModal")},function(a){$location.url("/500"),b.$broadcast("hideLoadingModal")}),a.createClientDataModal=function(){d.open({templateUrl:"/app/client/adminClientDataModal.html",controller:"createClientDataCtrl",size:"800",resolve:{client:function(){return{}},type:function(){return"CREATE"}}})},a.modifyClientDataModal=function(a){d.open({templateUrl:"/app/client/adminClientDataModal.html",controller:"modifyClientDataCtrl",size:"800",resolve:{client:function(){return a},type:function(){return"UPDATE"}}})}}]),angular.module("seqariApp").controller("createClientDataCtrl",["$scope","$rootScope","commonServices","client","type","$modalInstance","$route","$timeout","utilServices",function(a,b,c,d,e,f,g,h,i){a.isMapLoaded=!1,a.client=angular.copy(d),a.type=e,a.initialize=function(){var b=new google.maps.LatLng(-33.7852771,-55.7143609),c={zoom:7,center:b,mapTypeId:google.maps.MapTypeId.ROADMAP};a.map=new google.maps.Map(document.getElementById("map_canvas"),c),a.isMapLoaded=!0},a.init=function(){a.initialize()},a.$watch("map",function(b,c){a.isMapLoaded&&google.maps.event.addListener(a.map,"click",function(b){a.client.lat=b.latLng.lat(),a.client["long"]=b.latLng.lng(),a.marker&&a.marker.setMap(null),a.marker={lat:b.latLng.lat(),lng:b.latLng.lng()},a.addMarker(a.marker,a.map)})}),a.addMarker=function(b,c){a.marker=new google.maps.Marker({position:b,map:c})},h(function(){google.maps.event.trigger(a.map,"resize"),a.map.setCenter(new google.maps.LatLng(-33.7852771,-55.7143609))},0),a.save=function(){b.$broadcast("showLoadingModal"),a.client.active=!0,c.postAction("/clients/",a.client).then(function(){g.reload(),f.dismiss("cancel"),i.successModal("Crear cliente","¡El cliente ha sido creado correctamente!")},function(a){null!==a.cr?a.message="ID del cliente incorrecto":a.message="Datos ingresados inválidos",i.errorModal("Error",a)})},a.close=function(){f.dismiss("cancel")}}]),angular.module("seqariApp").controller("modifyClientDataCtrl",["$scope","$rootScope","commonServices","client","type","$modalInstance","$route","$timeout","utilServices",function(a,b,c,d,e,f,g,h,i){function j(b,c){a.marker=new google.maps.Marker({position:b,map:c})}a.isMapLoaded=!1,a.client=angular.copy(d),a.type=e,a.initialize=function(){var b=new google.maps.LatLng(a.client.lat,a.client["long"]),c={zoom:15,center:b,mapTypeId:google.maps.MapTypeId.ROADMAP};a.map=new google.maps.Map(document.getElementById("map_canvas"),c),a.marker={lat:a.client.lat,lng:a.client["long"]},j(a.marker,a.map),a.isMapLoaded=!0},a.init=function(){a.initialize()},a.$watch("map",function(b,c){a.isMapLoaded&&google.maps.event.addListener(a.map,"click",function(b){a.client.lat=b.latLng.lat(),a.client["long"]=b.latLng.lng(),a.marker&&a.marker.setMap(null),a.marker={lat:b.latLng.lat(),lng:b.latLng.lng()},j(a.marker,a.map)})}),h(function(){google.maps.event.trigger(a.map,"resize"),a.map.setCenter(new google.maps.LatLng(a.client.lat,a.client["long"]))},0),a.save=function(){b.$broadcast("showLoadingModal"),c.patchAction("/clients/"+a.client.id,a.client).then(function(){g.reload(),f.dismiss("cancel"),i.successModal("Modificar cliente","¡El cliente ha sido modificado correctamente!")},function(a){i.errorModal("Error",a)})},a.close=function(){f.dismiss("cancel")}}]),angular.module("seqariApp").config(["$routeProvider",function(a){a=a.when("/client",{templateUrl:"app/client/client.html",controller:"clientCtrl",title:"Clientes"})}]),angular.module("seqariApp").service("clientServices",["$rootScope","$q","$http",function(a,b,c){this.postAction=function(a,d){var e=b.defer();return(void 0===d||null===d)&&(d={}),c.post("/client/"+a,d).success(function(a,b,c,d){e.resolve(a,b,c,d)}).error(function(a,b,c,d){e.reject(a,b,c,d)}),e.promise},this.getAction=function(a){var d=b.defer();return c.get("/client/"+a).success(function(a,b,c,e){d.resolve(a,b,c,e)}).error(function(a,b,c,e){d.reject(a,b,c,e)}),d.promise}}]),angular.module("seqariApp").factory("filterMapResolvers",[function(){return{filter:function(a,b,c){var d=a[b];return void 0===d||null===d?void 0===c||null===c?b:c:d}}}]),angular.module("seqariApp").service("commonServices",["$rootScope","$q","$http",function(a,b,c){this.postAction=function(a,d){var e=b.defer();return(void 0===d||null===d)&&(d={}),c.post(a,d).success(function(a,b,c,d){e.resolve(a,b,c,d)}).error(function(a,b,c,d){e.reject(a,b,c,d)}),e.promise},this.getAction=function(a){var d=b.defer();return c.get(a).success(function(a,b,c,e){d.resolve(a,b,c,e)}).error(function(a,b,c,e){d.reject(a,b,c,e)}),d.promise},this.deleteAction=function(a){var d=b.defer();return c["delete"](a).success(function(a,b,c,e){d.resolve(a,b,c,e)}).error(function(a,b,c,e){d.reject(a,b,c,e)}),d.promise},this.putAction=function(a,d){var e=b.defer();return(void 0===d||null===d)&&(d={}),c.put(a,d).success(function(a,b,c,d){e.resolve(a,b,c,d)}).error(function(a,b,c,d){e.reject(a,b,c,d)}),e.promise},this.patchAction=function(a,d){var e=b.defer();return(void 0===d||null===d)&&(d={}),c.patch(a,d).success(function(a,b,c,d){e.resolve(a,b,c,d)}).error(function(a,b,c,d){e.reject(a,b,c,d)}),e.promise}}]),angular.module("seqariApp").controller("dispatcherCtrl",["$scope","$rootScope","commonServices","$modal","$location",function(a,b,c,d,e){b.$broadcast("showLoadingModal");var f=c.getAction("dispatchers");f.then(function(c){a.allDispatchers=c.data,b.$broadcast("hideLoadingModal")},function(a){e.url("/500"),b.$broadcast("hideLoadingModal")}),a.modifyDispatcherDataModal=function(a){d.open({templateUrl:"/app/dispatcher/adminDispatcherDataModal.html",controller:"modifyDispatcherDataCtrl",resolve:{dispatcher:function(){return a},type:function(){return"UPDATE"}}})},a.createDispatcherDataModal=function(){d.open({templateUrl:"/app/dispatcher/adminDispatcherDataModal.html",controller:"createDispatcherDataCtrl",resolve:{dispatcher:function(){return{}},type:function(){return"CREATE"}}})}}]),angular.module("seqariApp").controller("createDispatcherDataCtrl",["$scope","$rootScope","commonServices","dispatcher","type","$modalInstance","$route","utilServices",function(a,b,c,d,e,f,g,h){a.dispatcher=angular.copy(d),a.type=e,a.save=function(){b.$broadcast("showLoadingModal"),a.dispatcher.active=!0,c.postAction("/dispatchers/",a.dispatcher).then(function(){g.reload(),f.dismiss("cancel"),h.successModal("Crear transportista","¡El transportista ha sido creado correctamente!")},function(a){h.errorModal("Error",a)})},a.close=function(){f.dismiss("cancel")}}]),angular.module("seqariApp").controller("modifyDispatcherDataCtrl",["$scope","$rootScope","commonServices","dispatcher","type","$modalInstance","$route","utilServices",function(a,b,c,d,e,f,g,h){a.dispatcher=angular.copy(d),a.type=e,a.save=function(){b.$broadcast("showLoadingModal"),c.patchAction("/dispatchers/"+a.dispatcher.id,a.dispatcher).then(function(){g.reload(),f.dismiss("cancel"),h.successModal("Modificar transportista","¡El transportista ha sido modificado correctamente!")},function(a){h.errorModal("Error",a)})},a.close=function(){f.dismiss("cancel")}}]),angular.module("seqariApp").controller("helpCtrl",["$scope","$rootScope","commonServices","$location","utilServices",function(a,b,c,d,e){a.goBack=function(){d.url("/")}}]),angular.module("seqariApp").config(["$routeProvider",function(a){a=a.when("/help",{templateUrl:"app/help/help.html",controller:"helpCtrl",title:"Ayuda"})}]),angular.module("seqariApp").controller("homeCtrl",["$scope","$rootScope","commonServices","$location","utilServices",function(a,b,c,d,e){a.logout=function(a){b.$broadcast("showLoadingModal"),c.deleteAction("/user_sessions/"+a).then(function(a){b.loggedUser={},b.isLogged=!1,d.url("/login"),b.$broadcast("hideLoadingModal")},function(a){e.errorModal("Error",a)})},b.goHome=function(){d.url("/")},b.goToLogin=function(){d.url("/login")},b.adminWebUsers=function(){d.url("/webUsers")},b.adminClients=function(){d.url("/clients")},b.adminDispatchers=function(){d.url("/dispatchers")},b.showOrders=function(){d.url("/orders")},b.showRoutes=function(){d.url("/routes")},b.showHistoryRoutes=function(){d.url("/historyRoutes")},b.dailyReports=function(){d.url("/dailyReports")},b.businessReports=function(){d.url("/businessReports")}}]),angular.module("seqariApp").config(["$routeProvider",function(a){a=a.when("/webUsers",{templateUrl:"app/webUser/webUsers.html",controller:"webUserCtrl",title:"Gestionar usuarios web"}),a=a.when("/clients",{templateUrl:"app/client/clients.html",controller:"clientCtrl",title:"Gestionar clientes"}),a=a.when("/dispatchers",{templateUrl:"app/dispatcher/dispatchers.html",controller:"dispatcherCtrl",title:"Gestionar transportistas"}),a=a.when("/orders",{templateUrl:"app/order/orders.html",controller:"orderCtrl",title:"Listado de pedidos"}),a=a.when("/routes",{templateUrl:"app/route/routes.html",controller:"routesCtrl",title:"Listado de recorridos"}),a=a.when("/historyRoutes",{templateUrl:"app/route/historyRoutes.html",controller:"historyRoutesCtrl",title:"Histórico de recorridos"}),a=a.when("/dailyReports",{templateUrl:"app/report/dailyReports.html",controller:"dailyReportCtrl",title:"Reportes del día"}),a=a.when("/businessReports",{templateUrl:"app/report/businessReports.html",controller:"businessReportCtrl",title:"Reportes de negocio"})}]),angular.module("seqariApp").controller("loginCtrl",["$scope","$rootScope","commonServices","$location","utilServices","$modal",function(a,b,c,d,e,f){a.loginUser={remember_me:!1},b.isLogged&&d.url("/"),a.showError=!1,a.login=function(){b.$broadcast("showLoadingModal");var f={};f=a.loginUser,c.postAction("/user_sessions",f).then(function(c){null!==c.data?(b.loggedUser=c.data,b.isLogged=!0,d.path("/")):(b.loggedUser={},b.isLogged=!1,a.showError=!0),b.$broadcast("hideLoadingModal")},function(a){null!=a.password?a.message="Contraseña inválida":null!=a.login?a.message="Usuario inválido":a.message="Ingreso al sistema inválido",e.errorModal("Error",a)})},a.restartPasswordModal=function(){f.open({templateUrl:"/app/login/restartPasswordModal.html",controller:"restartPasswordModalCtrl"})}}]),angular.module("seqariApp").controller("restartPasswordModalCtrl",["$scope","$rootScope","commonServices","$modalInstance","$route","utilServices",function(a,b,c,d,e,f){a.data={email:""},a.save=function(){b.$broadcast("showLoadingModal"),c.postAction("/password_resets",a.data).then(function(){d.dismiss("cancel"),f.successModal("Resetear contraseña","¡Las instrucciones para resetear su contraseña fueron enviadas a su email correctemente!")},function(a){a.message=a.data,a.message=a.message.replace("&oacute;","ó"),f.errorModal("Error",a)})},a.close=function(){d.dismiss("cancel")}}]),angular.module("seqariApp").controller("restartPasswordCtrl",["$scope","$rootScope","$routeParams","commonServices","$location","utilServices",function(a,b,c,d,e,f){b.restartPassword=!0,b.isLogged&&e.url("/"),a.showError=!1,a.token=c.perishableToken,a.reset=function(){b.$broadcast("showLoadingModal");var c={};c=a.loginUser,d.patchAction("/password_resets/"+a.token,c).then(function(c){null!==c.data?(b.loggedUser=c.data,b.isLogged=!0,e.path("/")):(b.loggedUser={},b.isLogged=!1,a.showError=!0),b.$broadcast("hideLoadingModal")},function(a){f.errorModal("Error",a)})}}]),angular.module("seqariApp").controller("clientController",["$scope","commonServices",function(a,b){a.client={},a.clients=[],a.createClient=function(){var c={};c=a.client,b.postAction("createClient",c).then(function(a){alert(a.data)},function(a){alert(a.error)})},a.updateClient=function(){var c={};c=a.client,b.postAction("updateClient",c).then(function(a){alert(a.data)},function(a){alert(a.error)})},a.deleteClient=function(){var c={};c=a.client,b.postAction("deleteClient",c).then(function(a){alert(a.data)},function(a){alert(a.error)})},a.listClients=function(){b.getAction("listClients").then(function(b){a.clients=b.data},function(a){alert(a.error)})}}]),angular.module("seqariApp").controller("mapCtrl",["$scope","commonServices",function(a,b){function c(){{var a=new google.maps.LatLng(-34.397,150.644),b={zoom:8,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP};new google.maps.Map(document.getElementById("map_canvas"),b)}}function d(b,c){if(c!=google.maps.DistanceMatrixStatus.OK)alert("Error was: "+c);else{var d=b.originAddresses,e=b.destinationAddresses,f=document.getElementById("outputDiv");f.innerHTML="",a.deleteOverlays();for(var g=0;g<d.length;g++)for(var h=b.rows[g].elements,i=0;i<h.length;i++)f.innerHTML+="<b>ORIGEN: </b>"+d[g]+" | <b>DESTINO: </b>"+e[i]+" | <b>DISTANCIA: </b>"+h[i].distance.text+" | <b>TIEMPO ESTIMADO: </b>"+h[i].duration.text}}a.cities=[{city:"Montevideo",desc:"La gran capital",lat:-34.890497,"long":-56.114054},{city:"Sarandí del Yí",desc:"Pueblo con vacas y ovejas",lat:-33.33808,"long":-55.630668},{city:"Villa Serrana",desc:"Traigan alfajores",lat:-34.320921,"long":-54.985759}],a.waypts=[],a.waypts.push({location:"-34.320921,-54.985759",stopover:!0}),a.directionsService=new google.maps.DirectionsService,a.directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:!1}),a.origin=new google.maps.LatLng(a.cities[0].lat,a.cities[0]["long"]),a.destination=new google.maps.LatLng(a.cities[1].lat,a.cities[1]["long"]),a.destination1=new google.maps.LatLng(a.cities[2].lat,a.cities[2]["long"]),a.destinationIcon="https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=D|FF0000|000000",a.originIcon="https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=O|FFFF00|000000",a.mapOptions={center:new google.maps.LatLng(-33.8887456,-55.8683931),zoom:7,scaleControl:!0,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},google.maps.event.addDomListener(window,"load",c),a.calcRoute=function(){var b={origin:a.origin,destination:a.destination,optimizeWaypoints:!0,waypoints:a.waypts,travelMode:google.maps.TravelMode.DRIVING};a.directionsService.route(b,function(b,c){c==google.maps.DirectionsStatus.OK&&a.directionsDisplay.setDirections(b)})},a.calculateDistances=function(){var b=new google.maps.DistanceMatrixService;b.getDistanceMatrix({origins:[a.origin],destinations:[a.destination],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},d)},a.deleteOverlays=function(){for(var b=0;b<a.markers.length;b++)a.markers[b].setMap(null);a.markers=[]},a.openInfoWindow=function(a,b){a.preventDefault(),google.maps.event.trigger(b,"click")},a.calculateDistances(),a.calcRoute()}]),angular.module("seqariApp").controller("userCtrl",["$scope","userServices",function(a,b){a.webUser={},a.dispatcherUser={},a.webUsers=[],a.dispatcherUsers=[],a.createWebUser=function(){var b={};b=a.webUser,commonServices.postAction("createWebUser",b).then(function(a){alert(a.data)},function(a){alert(a.error)})},a.updateWebUser=function(){var b={};b=a.webUser,commonServices.postAction("updateWebUser",b).then(function(a){alert(a.data)},function(a){alert(a.error)})},a.deleteWebUser=function(){var b={};b=a.webUser,commonServices.postAction("deleteWebUser",b).then(function(a){alert(a.data)},function(a){alert(a.error)})},a.listWebUsers=function(){b.getAction("listWebUsers").then(function(b){a.webUsers=b.data},function(a){alert(a.error)})},a.createDispatcherUser=function(){var b={};b=a.dispatcherUser,commonServices.postAction("createDispatcherUser",b).then(function(a){alert(a.data)},function(a){alert(a.error)})},a.updateDispatcherUser=function(){var b={};b=a.dispatcherUser,commonServices.postAction("updateDispatcherUser",b).then(function(a){alert(a.data)},function(a){alert(a.error)})},a.deleteDispatcherUser=function(){var b={};b=a.dispatcherUser,commonServices.postAction("deleteDispatcherUser",b).then(function(a){alert(a.data)},function(a){alert(a.error)})},a.listDispatcherUsers=function(){b.getAction("listDispatcherUsers").then(function(b){a.dispatcherUsers=b.data},function(a){alert(a.error)})}}]),angular.module("seqariApp").controller("orderCtrl",["$scope","$rootScope","commonServices","$modal","$location","ngTableParams","utilServices",function(a,b,c,d,e,f,g){a.filteredOrders=[],a.showOrderSummary=function(a){b.$broadcast("showLoadingModal"),d.open({templateUrl:"/app/order/showOrderSummaryModal.html",controller:"showOrderSummaryCtrl",size:800,resolve:{order:function(){return a}}})},a.openFrom=function(b){a.openedFrom=!0},a.openTo=function(b){a.openedTo=!0},a.ListOrders=function(){b.$broadcast("showLoadingModal");var d=[],e=0;void 0!==a.ff_cr&&""!==a.ff_cr&&(d[e]="cr="+a.ff_cr,e++),void 0!==a.ff_status&&""!==a.ff_status&&(d[e]="status="+a.ff_status,e++),void 0!==a.ff_dtFrom&&null!==a.ff_dtFrom&&(d[e]="created_from="+a.ff_dtFrom,e++),void 0!==a.ff_dtTo&&null!==a.ff_dtTo&&(d[e]="created_to="+a.ff_dtTo,e++);for(var f="index_filtered_order?",h=0;e>h;h++)h>0&&(d[h]="&"+d[h]),f+=d[h];var i=c.getAction(f);i.then(function(c){a.filteredOrders=c.data,0==a.filteredOrders.length?a.showResults=!1:a.showResults=!0,b.$broadcast("hideLoadingModal")},function(a){g.errorModal("Error",a)})}}]),angular.module("seqariApp").controller("showOrderSummaryCtrl",["$scope","$rootScope","commonServices","$modalInstance","utilServices","order",function(a,b,c,d,e,f){a.order=f;var g=c.getAction("index_by_order/"+a.order.id);g.then(function(c){a.allOrderSummary=c.data,b.$broadcast("hideLoadingModal")},function(a){e.errorModal("Error",a)}),a.close=function(){d.dismiss("cancel")}}]),angular.module("seqariApp").controller("profileCtrl",["$scope","$rootScope","commonServices","$location","utilServices",function(a,b,c,d,e){a.user=b.loggedUser,a.password="PASSWORD",a.password_confirmation="PASSWORD",a.cancel=function(){d.url("/")},a.save=function(){"PASSWORD"!=a.password&&(a.user.password=a.password,a.user.password_confirmation=a.password_confirmation),c.patchAction("/users/"+a.user.id,a.user).then(function(){e.successModal("Modificar perfil","¡Los datos han sido guardados correctamente!"),d.url("/")},function(a){e.errorModal("Error",a)})}}]),angular.module("seqariApp").config(["$routeProvider",function(a){a=a.when("/profile",{templateUrl:"app/profile/profile.html",controller:"profileCtrl",title:"Perfil de usuario"})}]),angular.module("seqariApp").controller("businessReportCtrl",["$scope","$rootScope","commonServices","$location","utilServices",function(a,b,c,d,e){a.data={},a.showResults=!1,a.openFrom=function(b){a.openedFrom=!0},a.openTo=function(b){a.openedTo=!0},a.searchReports=function(){a.report_client_order_quantity(),a.report_deliver_avg(),a.report_dispatchers_deliver_avg(),a.report_orders_delivered(),a.report_routes_finished(),a.report_not_delivered_clients_quantity_by_date(),a.showResults=!0},a.report_client_order_quantity=function(){c.postAction("/report_client_order_quantity",a.data).then(function(b){a.orderQuantity=b.data,a.orderQuantityLabels=[],a.orderQuantityInfo=[],a.auxOrderQuantity=[];for(var c=0;c<a.orderQuantity.length;c++)a.orderQuantityLabels.push(a.orderQuantity[c].left),a.auxOrderQuantity.push(a.orderQuantity[c].count);a.orderQuantityInfo.push(a.auxOrderQuantity)},function(a){console.log(a)})},a.report_deliver_avg=function(){c.postAction("/report_deliver_avg",a.data).then(function(b){a.deliverAvg=b.data,a.deliverAvgLabels=[],a.deliverAvgInfo=[],a.auxDeliverAvg=[];for(var c=0;c<a.deliverAvg.length;c++)a.deliverAvgLabels.push(a.deliverAvg[c].left),a.auxDeliverAvg.push(a.deliverAvg[c].interval_in_hours);a.deliverAvgInfo.push(a.auxDeliverAvg)},function(a){console.log(a)})},a.report_dispatchers_deliver_avg=function(){c.postAction("/report_dispatchers_deliver_avg",a.data).then(function(b){a.dispatcherDeliverAvg=b.data,a.dispatcherDeliverAvgLabels=[],a.dispatcherDeliverAvgInfo=[],a.auxDispatcherDeliverAvg=[];for(var c=0;c<a.dispatcherDeliverAvg.length;c++)a.dispatcherDeliverAvgLabels.push(a.dispatcherDeliverAvg[c].name),a.auxDispatcherDeliverAvg.push(a.dispatcherDeliverAvg[c].interval_in_hours);a.dispatcherDeliverAvgInfo.push(a.auxDispatcherDeliverAvg)},function(a){console.log(a)})},a.report_not_delivered_clients_quantity_by_date=function(){c.postAction("/report_not_delivered_clients_quantity_by_date",a.data).then(function(b){a.ordersNotDelivered=b.data,a.ordersNotDeliveredLabels=[],a.ordersNotDeliveredInfo=[],a.auxOrdersNotDelivered=[];for(var c=0;c<a.ordersNotDelivered.length;c++){if(!(10>c)){a.auxOrdersMaxResults=!0;break}a.ordersNotDeliveredLabels.push(a.ordersNotDelivered[c].fecha),a.auxOrdersNotDelivered.push(a.ordersNotDelivered[c].cantidad)}a.ordersNotDeliveredInfo.push(a.auxOrdersNotDelivered)},function(a){console.log(a)})},a.report_orders_delivered=function(){c.postAction("/report_orders_delivered",a.data).then(function(b){a.ordersDelivered=b.data},function(a){console.log(a)})},a.report_routes_finished=function(){c.postAction("/report_routes_finished",a.data).then(function(c){a.routesFinished=c.data;for(var d=0;d<a.routesFinished.length;d++){var e=b.milisecToDaysHoursMinSec(a.routesFinished[d].duration);0!=e.d?a.routesFinished[d].strDuration=e.d+"d, "+e.h+"h, "+e.m+"m, "+e.s+"s":a.routesFinished[d].strDuration=e.h+"h, "+e.m+"m, "+e.s+"s"}},function(a){console.log(a)})}}]),angular.module("seqariApp").controller("dailyReportCtrl",["$scope","$rootScope","commonServices","$location","utilServices",function(a,b,c,d,e){a.colors={blue:"#ABC8D7",yellow:"#FDB45C",green:"#A7C17A",red:"#F86B6E"},c.getAction("/report_daily_routes").then(function(b){a.routesData=b.data,a.routesLabels=["Pendientes","En tránsito","Finalizados"],a.routesInfo=[a.routesData.pending,a.routesData.in_transit,a.routesData.finalized],a.routesColors=[a.colors.blue,a.colors.yellow,a.colors.green]},function(a){console.log(a)}),c.getAction("/report_daily_orders").then(function(b){a.ordersData=b.data,a.ordersData.delivered+=a.ordersData.delivered_without_validation,a.ordersLabels=["Pendientes","En tránsito","Entregados","No entregados"],a.ordersInfo=[a.ordersData.pending,a.ordersData.in_transit,a.ordersData.delivered,a.ordersData.not_delivered],a.ordersColors=[a.colors.blue,a.colors.yellow,a.colors.green,a.colors.red]},function(a){console.log(a)}),c.getAction("/report_daily_rutes_delay").then(function(c){a.routesDelay=c.data;for(var d=0;d<c.data.length;d++)null==c.data[d].route_delay&&a.routesDelay.splice(d,1);a.routesDelayLabels=[],a.routesDelayInfo=[],a.auxRoutesDelay=[];for(var e=0;e<a.routesDelay.length;e++){a.routesDelayLabels.push("Recorrido "+a.routesDelay[e].route_id),a.auxRoutesDelay.push(a.routesDelay[e].route_delay);var f=b.milisecToDaysHoursMinSec(6e4*a.routesDelay[e].route_delay);0!=f.d?a.routesDelay[e].route_delay_date=f.d+"d, "+f.h+"h, "+f.m+"m, "+f.s+"s":a.routesDelay[e].route_delay_date=f.h+"h, "+f.m+"m, "+f.s+"s"}a.routesDelayInfo.push(a.auxRoutesDelay)},function(a){console.log(a)}),c.getAction("/report_daily_top_10_dispatchers").then(function(b){a.topDispatchers=b.data,a.topDispatchersLabels=[],a.topDispatchersInfo=[],a.auxInfo=[];for(var c=0;c<a.topDispatchers.length;c++)a.topDispatchersLabels.push(a.topDispatchers[c].dispatcher_name),a.auxInfo.push(a.topDispatchers[c].routes_count);a.topDispatchersInfo.push(a.auxInfo)},function(a){console.log(a)}),c.getAction("/report_daily_top_10_clients").then(function(b){a.topClients=b.data,a.topClientsLabels=[],a.topClientsInfo=[],a.auxClients=[];for(var c=0;c<a.topClients.length;c++)a.topClientsLabels.push(a.topClients[c].client_business),a.auxClients.push(a.topClients[c].order_count);a.topClientsInfo.push(a.auxClients)},function(a){console.log(a)}),c.getAction("/report_daily_top_10_clients_delay").then(function(b){a.topClientsDelay=b.data,a.topClientsDelayLabels=[],a.topClientsDelayInfo=[],a.auxClientsDelay=[];for(var c=0;c<a.topClientsDelay.length;c++)a.topClientsDelayLabels.push(a.topClientsDelay[c].client_business),a.auxClientsDelay.push(a.topClientsDelay[c].avg_proximity_elapsed);a.topClientsDelayInfo.push(a.auxClientsDelay)},function(a){console.log(a)}),c.getAction("/report_daily_top_hour_delivered").then(function(b){a.hoursDelivered=b.data,a.hoursDeliveredLabels=[],a.hoursDeliveredInfo=[],a.auxHoursDelivered=[];for(var c=0;c<a.hoursDelivered.length;c++)a.hoursDeliveredLabels.push(a.hoursDelivered[c].hour+"hs"),a.auxHoursDelivered.push(a.hoursDelivered[c].hour_count);a.hoursDeliveredInfo.push(a.auxHoursDelivered)},function(a){console.log(a)})}]),angular.module("seqariApp").controller("historyRouteCtrl",["$scope","$rootScope","commonServices","$modal","$location","ngTableParams","$routeParams","$timeout","$q",function(a,b,c,d,e,f,g,h,i){b.$broadcast("showLoadingModal"),a.id=g.id,a.markers=[],a.mapMarkers=[],a.infowindows=[],a.markers.push({marker:{lat:b.carrau.lat,lng:b.carrau["long"]},client:{business:b.carrau.business,address:b.carrau.address}});var j=c.getAction("index_with_clients/"+a.id),k=c.getAction("route_summary/"+a.id),l=i.all([j,k]);l.then(function(c){a.historyRoute=c[0].data,a.routeSummaries=c[1].data,a.duration=b.milisecToDaysHoursMinSec(a.historyRoute.duration);for(var d=0;d<a.historyRoute.clients.length;d++)a.markers.push({marker:{lat:a.historyRoute.clients[d].lat,lng:a.historyRoute.clients[d]["long"]},client:a.historyRoute.clients[d]});b.$broadcast("addMarkers"),b.$broadcast("hideLoadingModal")},function(a){e.url("/500"),b.$broadcast("hideLoadingModal")}),a.initialize=function(){a.directionsDisplay=new google.maps.DirectionsRenderer;var c=new google.maps.LatLng(b.carrau.lat,b.carrau["long"]),d={zoom:12,center:c,mapTypeId:google.maps.MapTypeId.ROADMAP};a.map=new google.maps.Map(document.getElementById("map_canvas"),d),a.directionsDisplay.setMap(a.map)},a.init=function(){a.initialize()},b.$on("addMarkers",function(b){for(var c=0;c<a.markers.length;c++)a.addMarker(c),a.showInfoWindow(c)}),a.addMarker=function(b){var c;if(0===b)c="images/carrauMarker.png";else switch(c="http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=",a.markers[b].client.route_client_status){case"PENDING":c=c+b+"|b1aae0|000000";break;case"IN_TRANSIT":c=c+b+"|D5EB49|000000";break;case"DELIVERED":c=c+b+"|10d11a|000000";break;case"NOT_DELIVERED":c=c+b+"|db9292|000000"}a.mapMarkers[b]=new google.maps.Marker({position:a.markers[b].marker,map:a.map,clickable:!0,icon:c})},a.showInfoWindow=function(c){a.infowindows[c]=new google.maps.InfoWindow,a.mapMarkers[c].addListener("click",function(){var d='<div class="modal-text"><legend>'+a.markers[c].client.business+"</legend>";if(a.markers[c].client.route_client_status&&(d=d+"<div><b>Estado: </b>"+a.filterStatus(a.markers[c].client.route_client_status)+"</div>"),d=d+"<div><b>Dirección: </b>"+a.markers[c].client.address+"</div>",a.markers[c].client.phone&&(d=d+"<div><b>Teléfono: </b>"+a.markers[c].client.phone+"</div>"),a.markers[c].client.route_client_proximity){var e=b.milisecToDaysHoursMinSec(a.markers[c].client.route_client_proximity);d=0!=e.d?d+"<div><b>Tiempo de espera: </b>"+e.d+"d, "+e.h+"hs, "+e.m+"min, "+e.s+"seg</div>":d+"<div><b>Tiempo de espera: </b>"+e.h+"hs, "+e.m+"min, "+e.s+"seg</div>"}d+="</div>",a.infowindows[c].setContent(d),a.infowindows[c].open(a.map,a.mapMarkers[c]),a.mapMarkers[c].setAnimation(google.maps.Animation.BOUNCE)}),a.infowindows[c].addListener("closeclick",function(){a.mapMarkers[c].setAnimation(null)})},a.filterStatus=function(a){var b;switch(a){case"PENDING":b="Pendiente";break;case"IN_TRANSIT":b="En tránsito";break;case"DELIVERED":b="Entregado";break;case"NOT_DELIVERED":b="No entregado";break;default:b=a}return b},a.redirectToRoute=function(){e.url("/route/"+a.id)}}]),angular.module("seqariApp").controller("historyRoutesCtrl",["$scope","$rootScope","commonServices","$modal","$location","ngTableParams",function(a,b,c,d,e,f){b.$broadcast("showLoadingModal");var g=c.getAction("history_routes");g.then(function(c){a.finalizedRoutes=c.data;for(var d=0;d<c.data.length;d++){var e=b.milisecToDaysHoursMinSec(c.data[d].duration);0!=e.d?c.data[d].strDuration=e.d+"d, "+e.h+"h, "+e.m+"m, "+e.s+"s":c.data[d].strDuration=e.h+"h, "+e.m+"m, "+e.s+"s"}b.$broadcast("hideLoadingModal")},function(a){e.url("/500"),b.$broadcast("hideLoadingModal")}),a.showRouteClients=function(a){b.$broadcast("showLoadingModal"),d.open({templateUrl:"/app/route/showRouteClientsModal.html",controller:"showRouteClientsModalCtrl",resolve:{route:function(){return a}}})},a.viewHistoryRoute=function(a){e.url("/historyRoute/"+a)},a.tableParams=new f({page:1,count:10},{getData:function(b,c){var d=a.finalizedRoutes;c.total(d.length),b.resolve(a.blocks=d.slice((c.page()-1)*c.count(),c.page()*c.count()))}})}]),angular.module("seqariApp").controller("routeCtrl",["$scope","$rootScope","commonServices","$modal","$location","ngTableParams","$routeParams","$interval","$timeout","$q",function(a,b,c,d,e,f,g,h,i,j){b.$broadcast("showLoadingModal"),a.id=g.id,a.waypts=[],a.markers=[],a.mapMarkers=[],a.infowindows=[],a.directionsService=new google.maps.DirectionsService,a.originLocation=new google.maps.LatLng(b.carrau.lat,b.carrau["long"]),a.destinationLocation=new google.maps.LatLng(b.carrau.lat,b.carrau["long"]),a.markers.push({marker:{lat:b.carrau.lat,lng:b.carrau["long"]},client:{business:b.carrau.business,address:b.carrau.address}});var k=c.getAction("index_with_clients/"+a.id),l=c.getAction("route_summary/"+a.id),m=j.all([k,l]);m.then(function(c){a.route=c[0].data,a.routeSummaries=c[1].data,"IN_TRANSIT"==a.route.status&&(a.originLocation=new google.maps.LatLng(a.route.lat,a.route["long"]));for(var d=0;d<a.route.clients.length;d++)7>d&&("IN_TRANSIT"==a.route.clients[d].route_client_status||"PENDING"==a.route.clients[d].route_client_status)&&a.waypts.push({location:a.route.clients[d].lat+","+a.route.clients[d]["long"],stopover:!0}),a.markers.push({marker:{lat:a.route.clients[d].lat,lng:a.route.clients[d]["long"]},client:a.route.clients[d]});b.$broadcast("calculateRoute"),b.$broadcast("hideLoadingModal")},function(a){e.url("/500"),b.$broadcast("hideLoadingModal")}),a.initialize=function(){a.directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:!0});var c=new google.maps.LatLng(b.carrau.lat,b.carrau["long"]),d={zoom:7,center:c,mapTypeId:google.maps.MapTypeId.ROADMAP};a.map=new google.maps.Map(document.getElementById("map_canvas"),d),a.directionsDisplay.setMap(a.map)},a.init=function(){a.initialize()},a.calcRoute=function(){var b={origin:a.originLocation,
destination:a.destinationLocation,optimizeWaypoints:!0,waypoints:a.waypts,travelMode:google.maps.TravelMode.DRIVING};a.directionsService.route(b,function(b,c){c==google.maps.DirectionsStatus.OK&&(a.directionsDisplay.setDirections(b),a.addMarkers())})},a.updateDispatcherMarker=function(){c.getAction("/get_dispatcher_location/"+a.route.id).then(function(b){var c=new google.maps.LatLng(b.data.latitude,b.data.longitude);a.dispatcherMarker.setPosition(c)},function(a){console.log("ERROR: No se pudo obtener ubicación actual - "+a)})},a.addMarkers=function(){for(var b=0;b<a.markers.length;b++){var c;if(0===b)c="images/carrauMarker.png";else switch(a.markers[b].client.route_client_status){case"PENDING":c="images/pendingMarker.png";break;case"IN_TRANSIT":c="images/inTransitMarker.png";break;case"DELIVERED":c="images/deliveredMarker.png";break;case"NOT_DELIVERED":c="images/notDeliveredMarker.png"}a.mapMarkers[b]=new google.maps.Marker({position:a.markers[b].marker,map:a.map,clickable:!0,icon:c}),a.showInfoWindow(b)}var d={lat:a.route.lat,lng:a.route["long"]};a.dispatcherMarker=new google.maps.Marker({position:d,map:a.map,clickable:!1,icon:"images/truck.png"}),i(function(){a.$broadcast("setDispatcherLocation")},1e3)},a.$on("setDispatcherLocation",function(b){h(a.updateDispatcherMarker,1e4)}),a.showInfoWindow=function(b){a.infowindows[b]=new google.maps.InfoWindow,a.mapMarkers[b].addListener("click",function(){var c='<div class="modal-text"><legend>'+a.markers[b].client.business+"</legend>";a.markers[b].client.route_client_status&&(c=c+"<div><b>Estado: </b>"+a.filterStatus(a.markers[b].client.route_client_status)+"</div>"),c=c+"<div><b>Dirección: </b>"+a.markers[b].client.address+"</div>",a.markers[b].client.phone&&(c=c+"<div><b>Teléfono: </b>"+a.markers[b].client.phone+"</div>"),c+="</div>",a.infowindows[b].setContent(c),a.infowindows[b].open(a.map,a.mapMarkers[b]),a.mapMarkers[b].setAnimation(google.maps.Animation.BOUNCE)}),a.infowindows[b].addListener("closeclick",function(){a.mapMarkers[b].setAnimation(null)})},a.filterStatus=function(a){var b;switch(a){case"PENDING":b="Pendiente";break;case"IN_TRANSIT":b="En tránsito";break;case"DELIVERED":b="Entregado";break;case"NOT_DELIVERED":b="No entregado";break;default:b=a}return b},b.$on("calculateRoute",function(b){a.calcRoute()}),a.redirectToHistoryRoute=function(){e.url("/historyRoute/"+a.id)},a.refreshRoute=function(){var d=c.getAction("index_with_clients/"+a.id);d.then(function(c){a.markers=[],a.waypts=[],a.deleteMarkers(),a.markers.push({marker:{lat:b.carrau.lat,lng:b.carrau["long"]},client:{business:b.carrau.business,address:b.carrau.address}}),a.route=c.data,"IN_TRANSIT"==a.route.status&&(a.originLocation=new google.maps.LatLng(a.route.lat,a.route["long"]));for(var d=0;d<a.route.clients.length;d++)7>d&&("IN_TRANSIT"==a.route.clients[d].route_client_status||"PENDING"==a.route.clients[d].route_client_status)&&a.waypts.push({location:a.route.clients[d].lat+","+a.route.clients[d]["long"],stopover:!0}),a.markers.push({marker:{lat:a.route.clients[d].lat,lng:a.route.clients[d]["long"]},client:a.route.clients[d]});b.$broadcast("calculateRoute")})},a.deleteMarkers=function(){for(var b=0;b<a.mapMarkers.length;b++)a.mapMarkers[b].setMap(null);a.mapMarkers=[]}}]),angular.module("seqariApp").config(["$routeProvider",function(a){a=a.when("/route/:id",{templateUrl:"app/route/route.html",controller:"routeCtrl",title:"Recorrido"}),a=a.when("/historyRoute/:id",{templateUrl:"app/route/historyRoute.html",controller:"historyRouteCtrl",title:"Recorrido"})}]),angular.module("seqariApp").controller("routesCtrl",["$scope","$rootScope","commonServices","$modal","$location","ngTableParams",function(a,b,c,d,e,f){b.$broadcast("showLoadingModal");var g=c.getAction("current_routes");g.then(function(c){a.allRoutes=c.data,b.$broadcast("hideLoadingModal")},function(a){e.url("/500"),b.$broadcast("hideLoadingModal")}),a.tableParams=new f({page:1,count:10},{getData:function(b,c){var d=a.allRoutes;c.total(d.length),b.resolve(a.blocks=d.slice((c.page()-1)*c.count(),c.page()*c.count()))}}),a.showRouteClients=function(a){b.$broadcast("showLoadingModal"),d.open({templateUrl:"/app/route/showRouteClientsModal.html",controller:"showRouteClientsModalCtrl",resolve:{route:function(){return a}}})},a.viewRoute=function(a){e.url("/route/"+a)}}]),angular.module("seqariApp").controller("showRouteClientsModalCtrl",["$scope","$rootScope","commonServices","route","$modalInstance","$route","utilServices",function(a,b,c,d,e,f,g){a.route=d;var h=c.getAction("index_by_route/"+a.route.id);h.then(function(c){a.allRouteClients=c.data,b.$broadcast("hideLoadingModal")},function(a){g.errorModal("Error",a)}),a.close=function(){e.dismiss("cancel")}}]),angular.module("seqariApp").controller("validateOrderCtrl",["$scope","$rootScope","$routeParams","commonServices","$location","utilServices",function(a,b,c,d,e,f){b.$broadcast("showLoadingModal"),a.qrCode=c.qrCode,e.path("/validateOrder",!1);var g=d.getAction("/orders/index_to_validate_by_client_qr/"+a.qrCode);g.then(function(c){a.allOrderToValidate=c.data,b.$broadcast("hideLoadingModal")},function(a){f.errorModal("Error",a)}),a.validateOrders=function(){b.$broadcast("showLoadingModal");for(var c={orders:[]},g=0;g<a.allOrderToValidate.orders.length;g++)a.allOrderToValidate.orders[g].validate&&c.orders.push(a.allOrderToValidate.orders[g].cr);if(0!=c.orders.length)d.postAction("/orders/validates",c).then(function(){f.successModal("Validar pedidos","¡Los pedidos han sido validados correctamente!"),e.path("/validateOrder/"+a.qrCode,!0)},function(a){f.errorModal("Error",a)});else{var h={message:"Debes validar al menos un pedido"};f.errorModal("Error",h)}}}]),angular.module("seqariApp").controller("webUserCtrl",["$scope","$rootScope","commonServices","$modal",function(a,b,c,d){b.$broadcast("showLoadingModal");var e=c.getAction("users");e.then(function(c){a.allUsers=c.data,b.$broadcast("hideLoadingModal")},function(a){$location.url("/500"),b.$broadcast("hideLoadingModal")}),a.modifyUserDataModal=function(a){d.open({templateUrl:"/app/webUser/adminUserDataModal.html",controller:"modifyUserDataCtrl",resolve:{user:function(){return a},type:function(){return"UPDATE"}}})},a.createUserDataModal=function(){d.open({templateUrl:"/app/webUser/adminUserDataModal.html",controller:"createUserDataCtrl",resolve:{user:function(){return{}},type:function(){return"CREATE"}}})},a.profileModal=function(a){d.open({templateUrl:"/app/webUser/profileModal.html",controller:"profileModalCtrl",resolve:{user:function(){return a}}})}}]),angular.module("seqariApp").controller("createUserDataCtrl",["$scope","$rootScope","commonServices","user","type","$modalInstance","$route","utilServices",function(a,b,c,d,e,f,g,h){a.user=angular.copy(d),a.type=e,a.user.queries=!0,a.save=function(){b.$broadcast("showLoadingModal"),a.user.password=a.user.login,a.user.password_confirmation=a.user.login,a.user.active=!0,c.postAction("/users/",a.user).then(function(){g.reload(),f.dismiss("cancel"),h.successModal("Crear usuario web","¡El usuario web ha sido creado correctamente!")},function(a){(a.login=!0&&null==a.email)?a.message="Usuario incorrecto":null!=a.email?a.message="Email inválido":a.message="Datos incorrectos",console.log(a),h.errorModal("Error",a)})},a.close=function(){f.dismiss("cancel")}}]),angular.module("seqariApp").controller("modifyUserDataCtrl",["$scope","$rootScope","commonServices","user","type","$modalInstance","$route","utilServices",function(a,b,c,d,e,f,g,h){a.user=angular.copy(d),a.type=e,a.save=function(){b.$broadcast("showLoadingModal"),c.patchAction("/users/"+a.user.id,a.user).then(function(){b.loggedUser.id===a.user.id&&b.loggedUser.name!==a.user.name&&(b.loggedUser.name=a.user.name),g.reload(),f.dismiss("cancel"),h.successModal("Modificar usuario web","¡El usuario web ha sido modificado correctamente!")},function(a){h.errorModal("Error",a)})},a.close=function(){f.dismiss("cancel")}}]),angular.module("seqariApp").controller("profileModalCtrl",["$scope","$rootScope","commonServices","user","$modalInstance","utilServices",function(a,b,c,d,e,f){a.user=d,a.close=function(){e.dismiss("cancel")}}]),angular.module("seqariApp").directive("accessError",function(){return{restrict:"A",transclude:!0,templateUrl:"app/common/error/accessError.html"}}),angular.module("seqariApp").filter("orderActions",["filterMapResolvers",function(a){var b={1:"Ingresado",2:"Listado",3:"Relistado",4:"Modificado",5:"Pasado a UN",6:"Detenido por UN",7:"Liberado por UN",8:"Detenido por VENTAS",9:"Aprobado por VENTAS",10:"Anula OK de VENTAS",11:"",12:"Detenido por CRÉDITOS",13:"Liberado por CRÉDITOS",14:"Aprobado por CRÉDITOS",15:"Anula OK de CRÉDITOS",16:"Rechazado por CRÉDITOS",17:"Enviado a WIS",18:"No enviado a WIS",19:"Recibido de WIS",20:"Tandeado",21:"Facturado",22:"Expedido",23:"Excluido de WIS",24:"Cumplido",25:"Anulado",26:"Activa anulación (vta)",27:"Fix",28:"Generado por N/C",29:"Anulado, Excede IVA",30:"Generada por Prefact.",31:"Eliminada",32:"Anulado, Excede U.C.",33:"Anulada Autom. (SIS)",34:"N/C automática WIS",35:"Ingreso precios N/C",36:"Aprobación precios N/C",41:"CP-SI-DOLAR a valor 1",42:"CP-SI-EXPORT a valor 1",43:"CP-SI-IVA a valor 1",44:"CP-SI-IMESI a valor 1",45:"CP-SI-SERVIC a valor 1",46:"CP-SI-REMITO a valor 1",51:"CP-SI-DOLAR a valor 0",52:"CP-SI-EXPORT a valor 0",53:"CP-SI-IVA a valor 0",54:"CP-SI-IMESI a valor 0",55:"CP-SI-SERVIC a valor 0",56:"CP-SI-REMITO a valor 0",60:"Carga referencias N/C"};return function(c){return a.filter(b,c)}}]),angular.module("seqariApp").filter("orderStatus",["filterMapResolvers",function(a){var b={PENDING:"Pendiente",IN_TRANSIT:"En tránsito",DELIVERED:"Entregado y verificado",DELIVERED_WITHOUT_VALIDATION:"Entregado sin verificar",NOT_DELIVERED:"No entregado"};return function(c){return a.filter(b,c)}}]),angular.module("seqariApp").filter("orderSummaryStatus",["filterMapResolvers",function(a){var b={1:"Ingresado",10:"Pasa a UN",14:"Detenido por UN",15:"Detenido por VENTAS",16:"No alcanza monto mínimo",19:"Aprobado por VENTAS",23:"Cliente sin código",25:"Detenido por CRÉDITOS",29:"Aprobado por CRÉDITOS",49:"Enviado a WIS",58:"Recibido de WIS (pre)",59:"Recibido de WIS",68:"Facturado fuera de WIS",69:"Facturado",79:"Expedido",88:"Excluido de WIS",89:"Cumplido",99:"Anulado"};return function(c){return a.filter(b,c)}}]),angular.module("seqariApp").filter("routeStatus",["filterMapResolvers",function(a){var b={PENDING:"Pendiente",IN_TRANSIT:"En tránsito",FINISHED:"Finalizado"};return function(c){return a.filter(b,c)}}]),angular.module("seqariApp").filter("routeSummaryType",["filterMapResolvers",function(a){var b={START_ROUTE:"Se inicia el recorrido",END_ROUTE:"Finaliza el recorrido",UPDATE_CLIENT_STATUS:"Se actualiza el estado del cliente"};return function(c){return a.filter(b,c)}}]),angular.module("seqariApp").directive("loadingModal",function(){return{restrict:"A",scope:{show:"="},transclude:!0,templateUrl:"app/common/loading/loading.html",controller:["$scope",function(a){a.loadingModal=!!a.show,a.loadingModalCount=0,a.loadingModal&&(a.loadingModalCount=1),a.$on("showLoadingModal",function(){a.loadingModal=!0,a.loadingModalCount+=1}),a.$on("hideLoadingModal",function(){a.loadingModalCount-=1,a.loadingModalCount<=0&&(a.loadingModal=!1,a.loadingModalCount=0)}),a.$on("forceHideLoadingModal",function(){a.loadingModal=!1,a.loadingModalCount=0}),a.$on("showSingleLoadingModal",function(){a.loadingModal=!0})}]}}),angular.module("seqariApp").directive("navbar",function(){return{restrict:"A",transclude:!0,templateUrl:"app/common/navbar/navbar.html",controller:["$rootScope","$scope","$location",function(a,b,c){b.goProfile=function(a){c.url("/profile")},b.goHelp=function(){c.url("/help")}}]}}),angular.module("seqariApp").service("utilServices",["$modal",function(a){this.errorModal=function(b,c){a.open({templateUrl:"app/common/utils/errorModal.html",backdrop:"static",keyboard:!1,resolve:{title:function(){return b},error:function(){return c}},controller:["$scope","$rootScope","$modalInstance","title","error",function(a,b,c,d,e){a.error={title:d,code:e.code,message:e.message},b.$broadcast("forceHideLoadingModal"),a.close=function(){c.dismiss("cancel")}}]})},this.successModal=function(b,c){a.open({templateUrl:"app/common/utils/successModal.html",backdrop:"static",keyboard:!1,resolve:{title:function(){return b},success:function(){return c}},controller:["$scope","$rootScope","$modalInstance","title","success",function(a,b,c,d,e){a.success={title:d,message:e},b.$broadcast("forceHideLoadingModal"),a.close=function(){c.dismiss("cancel")}}]})}}]);